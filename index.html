<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="G·ª≠i l·ªùi ch√∫c m·ª´ng ng√†y Nh√† gi√°o Vi·ªát Nam 20/11 ƒë·∫∑c bi·ªát v·ªõi qu√† t·∫∑ng k·ªπ thu·∫≠t s·ªë ƒë·∫ßy √Ω nghƒ©a. T·∫°o thi·ªáp ch√∫c m·ª´ng, th∆∞ tay, ·∫£nh v√† nh·∫°c n·ªÅn cho th·∫ßy c√¥ y√™u qu√Ω.">
    <meta name="keywords" content="20/11, ng√†y nh√† gi√°o vi·ªát nam, ch√∫c m·ª´ng th·∫ßy c√¥, qu√† t·∫∑ng 20/11, thi·ªáp ch√∫c m·ª´ng, th∆∞ tay, l·ªùi ch√∫c th·∫ßy c√¥">
    <meta name="author" content="Gift2011">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#ff6b9d">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://gift2011.onrender.com/">
    <meta property="og:title" content="Ch√∫c M·ª´ng Ng√†y Nh√† Gi√°o Vi·ªát Nam 20/11">
    <meta property="og:description" content="G·ª≠i l·ªùi ch√∫c m·ª´ng ng√†y Nh√† gi√°o Vi·ªát Nam 20/11 ƒë·∫∑c bi·ªát v·ªõi qu√† t·∫∑ng k·ªπ thu·∫≠t s·ªë ƒë·∫ßy √Ω nghƒ©a. T·∫°o thi·ªáp ch√∫c m·ª´ng, th∆∞ tay, ·∫£nh v√† nh·∫°c n·ªÅn cho th·∫ßy c√¥ y√™u qu√Ω.">
    <meta property="og:image" content="./assets/images/teacherday.png">
    <meta property="og:locale" content="vi_VN">
    <meta property="og:site_name" content="Gift2011">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="./assets/images/teacherday.png">
    <link rel="apple-touch-icon" href="./assets/images/teacherday.png">
    
    <title>Ch√∫c M·ª´ng 20/11</title>
      <!-- Ch·∫∑n DevTools -->
      <script src="./detect-devtools.js"></script>
      <script type='text/javascript'>
          // Bypass for developers
          const keyName = 'key';
          const keyValue = '9ac7ec230e0e4513578f309d6d3579ad';
  
          // Handle via config
          DisableDevtool({
              tkName: keyName,
              md5: keyValue,
              interval: '100',
          });
      </script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Pacifico&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css" id="original-styles">
    <style>
        @keyframes heartFloat {
            0% { transform: translateY(100vh) scale(0); opacity: 0; }
            10% { opacity: 0.8; transform: translateY(90vh) scale(1); }
            90% { opacity: 0.8; transform: translateY(10vh) scale(1); }
            100% { transform: translateY(-10vh) scale(0); opacity: 0; }
        }
        
        @keyframes flowerFloat {
            0% { transform: translateY(100vh) rotate(0deg) scale(0); opacity: 0; }
            10% { opacity: 0.7; transform: translateY(90vh) rotate(10deg) scale(1); }
            90% { opacity: 0.7; transform: translateY(10vh) rotate(350deg) scale(1); }
            100% { transform: translateY(-10vh) rotate(360deg) scale(0); opacity: 0; }
        }
        
        @keyframes confettiFall {
            0% { transform: translateY(-20px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
        
        @keyframes sparkleTwinkle {
            0%, 100% { opacity: 0; transform: scale(0.5) rotate(0deg); }
            50% { opacity: 0.9; transform: scale(1.2) rotate(180deg); }
        }
        
        @keyframes particleFloat {
            0% { transform: translateY(0px) scale(0.5); opacity: 0.6; }
            25% { transform: translateY(-20px) scale(1); opacity: 0.8; }
            50% { transform: translateY(-10px) scale(0.8); opacity: 0.6; }
            75% { transform: translateY(-25px) scale(1.1); opacity: 0.7; }
            100% { transform: translateY(0px) scale(0.5); opacity: 0.6; }
        }
        
        /* Button ph√°t nh·∫°c */
        .music-play-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff6b9d 0%, #ff8fab 100%);
            border: none;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            opacity: 0.9;
        }
        
        .music-play-button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(255, 107, 157, 0.6);
            opacity: 1;
        }
        
        .music-play-button:active {
            transform: scale(0.95);
        }
        
        .music-play-button .music-icon {
            font-size: 22px;
            color: white;
            font-weight: bold;
            line-height: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .music-play-button .play-icon {
            margin-left: 2px; /* ƒêi·ªÅu ch·ªânh ƒë·ªÉ icon play cƒÉn gi·ªØa h∆°n */
        }
        
        .music-play-button .pause-icon {
            font-size: 20px;
        }
        
        @media (max-width: 768px) {
            .music-play-button {
                width: 45px;
                height: 45px;
                bottom: 20px;
                right: 20px;
            }
            
            .music-play-button .music-icon {
                font-size: 20px;
            }
            
            .music-play-button .pause-icon {
                font-size: 18px;
            }
        }
        
        /* Fullscreen Button - N·∫±m trong overlay */
        .fullscreen-button {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 44px;
            height: 44px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 107, 157, 0.3);
            cursor: pointer;
            z-index: 10000; /* Tr√™n c√πng overlay */
            display: none; /* M·∫∑c ƒë·ªãnh ·∫©n */
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        .fullscreen-button:hover {
            background: rgba(255, 255, 255, 1);
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
        }
        
        .fullscreen-button:active {
            transform: scale(0.95);
        }
        
        .fullscreen-button svg {
            width: 24px;
            height: 24px;
            color: #ff6b9d;
            stroke: #ff6b9d;
        }
        
        /* Ch·ªâ hi·ªÉn th·ªã tr√™n mobile landscape (bao g·ªìm tablet) */
        @media (max-width: 1024px) and (orientation: landscape) {
            .fullscreen-button {
                display: flex;
            }
        }
        
        /* Audio Unlock Overlay - Modal ch√≠nh l√† overlay lu√¥n */
        .audio-unlock-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.3) 0%, rgba(255, 143, 171, 0.3) 100%);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            z-index: 9998;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px;
            animation: fadeIn 0.3s ease;
        }
        
        .audio-unlock-overlay.hidden {
            display: none;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .audio-unlock-overlay h2 {
            color: #ff6b9d;
            font-size: 32px;
            margin-bottom: 20px;
            font-weight: 600;
        }
        
        .audio-unlock-overlay p {
            color: white;
            font-size: 18px;
            margin-bottom: 20px;
            line-height: 1.6;
            max-width: 600px;
        }
        
        .fullscreen-hint {
            display: none; /* M·∫∑c ƒë·ªãnh ·∫©n */
            align-items: center;
            justify-content: center;
            gap: 8px;
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            margin-bottom: 30px;
            padding: 10px 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(5px);
            max-width: 500px;
            text-align: center;
            line-height: 1.5;
        }
        
        .fullscreen-hint svg {
            flex-shrink: 0;
            stroke: rgba(255, 255, 255, 0.9);
        }
        
        /* Ch·ªâ hi·ªÉn th·ªã tr√™n mobile landscape (n∆°i c√≥ n√∫t fullscreen) */
        @media (max-width: 1024px) and (orientation: landscape) {
            .fullscreen-hint {
                display: flex;
            }
        }
        
        .audio-unlock-button {
            background: white;
            color: #ff6b9d;
            border: none;
            padding: 18px 50px;
            border-radius: 50px;
            font-size: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.3);
        }
        
        .audio-unlock-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
        }
        
        .audio-unlock-button:active {
            transform: translateY(0);
        }
        
        @media (max-width: 768px) {
            .audio-unlock-overlay {
                padding: 30px 20px;
            }
            
            .audio-unlock-overlay h2 {
                font-size: 24px;
            }
            
            .audio-unlock-overlay p {
                font-size: 16px;
                margin-bottom: 30px;
            }
            
            .audio-unlock-button {
                padding: 15px 40px;
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <!-- Audio Unlock Overlay - Modal ch√≠nh l√† overlay lu√¥n -->
    <div class="audio-unlock-overlay" id="audioUnlockOverlay">
        <!-- Fullscreen Button (ch·ªâ hi·ªÉn th·ªã tr√™n mobile landscape) -->
        <button id="fullscreenButton" class="fullscreen-button" title="M·ªü to√†n m√†n h√¨nh">
            <svg class="fullscreen-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/>
            </svg>
            <svg class="fullscreen-exit-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: none;">
                <path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"/>
            </svg>
        </button>
        <h2>üéµ B·∫Øt ƒë·∫ßu tr·∫£i nghi·ªám</h2>
        <p>Nh·∫•n n√∫t b√™n d∆∞·ªõi ƒë·ªÉ b·∫Øt ƒë·∫ßu nghe nh·∫°c v√† xem qu√† t·∫∑ng ƒë·∫∑c bi·ªát</p>
        <div class="fullscreen-hint" id="fullscreenHint">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/>
            </svg>
            <span>Nh·∫•n n√∫t g√≥c tr√™n ƒë·ªÉ ph√≥ng to m√†n h√¨nh ƒë·ªÉ tr·∫£i nghi·ªám t·ªët nh·∫•t</span>
        </div>
        <button class="audio-unlock-button" id="audioUnlockButton">B·∫Øt ƒë·∫ßu</button>
    </div>

    <!-- Corner Decorations -->

    <div class="corner-decor bottom-left">
        <svg viewBox="0 0 180 180" xmlns="http://www.w3.org/2000/svg">
            <circle cx="30" cy="150" r="13" fill="#ff9eb8" opacity="0.7"/>
            <circle cx="60" cy="160" r="10" fill="#ffc4d6" opacity="0.6"/>
            <circle cx="25" cy="120" r="11" fill="#ffb3cc" opacity="0.8"/>
            <path d="M10,170 Q40,140 70,150 T130,130" stroke="#ff85ab" stroke-width="3" fill="none" opacity="0.5"/>
            <circle cx="80" cy="130" r="9" fill="#ff9eb8" opacity="0.6"/>
        </svg>
    </div>

    <div class="corner-decor bottom-right">
        <svg viewBox="0 0 180 180" xmlns="http://www.w3.org/2000/svg">
            <circle cx="150" cy="150" r="13" fill="#ff9eb8" opacity="0.7"/>
            <circle cx="120" cy="160" r="10" fill="#ffc4d6" opacity="0.6"/>
            <circle cx="155" cy="120" r="11" fill="#ffb3cc" opacity="0.8"/>
            <path d="M170,170 Q140,140 110,150 T50,130" stroke="#ff85ab" stroke-width="3" fill="none" opacity="0.5"/>
            <circle cx="100" cy="130" r="9" fill="#ff9eb8" opacity="0.6"/>
        </svg>
    </div>

    <div class="top-center-decor">
        <img src="assets/images/teacherday.png" alt="Teacher Day" class="teacherday-image">
    </div>

    <!-- Floral decorations -->
    <div class="floral-top-left">
        <img src="assets/images/floral2.png" alt="Floral decoration" class="floral-img">
    </div>
    <div class="floral-top-right">
        <img src="assets/images/floral1.png" alt="Floral decoration" class="floral-img">
    </div>

    <!-- Pen Cursor -->
    <div class="pen-cursor" id="penCursor">
        <svg viewBox="0 0 35 35" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <linearGradient id="penGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#ff8fab;stop-opacity:1" />
                    <stop offset="50%" style="stop-color:#ff6b9d;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#e85a8f;stop-opacity:1" />
                </linearGradient>
            </defs>
            <ellipse cx="17" cy="12" rx="3" ry="10" fill="url(#penGradient)" transform="rotate(20 17 12)"/>
            <path d="M5,30 L8,22 L11,25 Z" fill="#d91e5c"/>
            <rect x="16" y="3" width="2.5" height="8" fill="#ffc4d6" rx="1" transform="rotate(20 17 7)"/>
            <ellipse cx="19" cy="10" rx="1.5" ry="4" fill="#ffffff" opacity="0.4" transform="rotate(20 19 10)"/>
        </svg>
    </div>

    <!-- Rotate Notice for Mobile -->
    <div class="rotate-notice">
        <img src="assets/images/phone-rotate.gif" alt="Xoay ngang m√†n h√¨nh">
        <h2>Ng∆∞·ªùi ƒë·∫πp vui l√≤ng xoay ngang m√†n h√¨nh</h2>
        <p>ƒë·ªÉ s·∫µn s√†ng ƒë√≥n nh·∫≠n b·∫•t ng·ªù nh√©</p>
    </div>
    
    <!-- Button ph√°t nh·∫°c -->
    <button id="musicPlayButton" class="music-play-button" title="Ph√°t nh·∫°c" style="display: none;">
        <span class="music-icon play-icon">‚ñ∂</span>
        <span class="music-icon pause-icon" style="display: none;">‚è∏</span>
    </button>
    
    <script>
        // Audio unlock handler - ph·∫£i ƒë·∫∑t tr∆∞·ªõc c√°c script kh√°c
        window.audioUnlocked = false;
        window.pendingAudio = null;
        
        // Function ki·ªÉm tra xem m√†n h√¨nh ƒë√£ xoay ngang ch∆∞a
        function isLandscape() {
            // Desktop (>1024px): Lu√¥n coi l√† landscape
            if (window.innerWidth > 1024) {
                return true;
            }
            // Tablet v√† Mobile (<=1024px): Ki·ªÉm tra orientation
            return window.innerWidth > window.innerHeight;
        }
        
        // Function c·∫≠p nh·∫≠t hi·ªÉn th·ªã overlay d·ª±a tr√™n orientation
        function updateOverlayVisibility() {
            const overlay = document.getElementById('audioUnlockOverlay');
            if (!overlay) return;
            
            // N·∫øu ƒë√£ unlock audio r·ªìi th√¨ kh√¥ng hi·ªÉn th·ªã l·∫°i overlay
            if (window.audioUnlocked) {
                overlay.classList.add('hidden');
                return;
            }
            
            if (isLandscape()) {
                // N·∫øu ƒë√£ xoay ngang, hi·ªÉn th·ªã overlay
                overlay.classList.remove('hidden');
            } else {
                // N·∫øu ch∆∞a xoay ngang, ·∫©n overlay
                overlay.classList.add('hidden');
            }
        }
        
        // ƒê·ª£i DOM ready ƒë·ªÉ ƒë·∫£m b·∫£o button t·ªìn t·∫°i
        document.addEventListener('DOMContentLoaded', function() {
            // Ki·ªÉm tra orientation ban ƒë·∫ßu
            updateOverlayVisibility();
            
            // L·∫Øng nghe s·ª± ki·ªán xoay m√†n h√¨nh
            window.addEventListener('orientationchange', function() {
                // Delay m·ªôt ch√∫t ƒë·ªÉ ƒë·∫£m b·∫£o window.innerWidth/innerHeight ƒë√£ c·∫≠p nh·∫≠t
                setTimeout(updateOverlayVisibility, 100);
            });
            
            // L·∫Øng nghe s·ª± ki·ªán resize (ƒë·ªÉ x·ª≠ l√Ω c·∫£ desktop resize)
            window.addEventListener('resize', function() {
                updateOverlayVisibility();
            });
            
            // Fullscreen functionality
            const fullscreenButton = document.getElementById('fullscreenButton');
            
            if (fullscreenButton) {
                const fullscreenIcon = fullscreenButton.querySelector('.fullscreen-icon');
                const fullscreenExitIcon = fullscreenButton.querySelector('.fullscreen-exit-icon');
                
                function updateFullscreenButton() {
                    const isFullscreen = !!(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement);
                    
                    if (isFullscreen) {
                        if (fullscreenIcon) fullscreenIcon.style.display = 'none';
                        if (fullscreenExitIcon) fullscreenExitIcon.style.display = 'block';
                        fullscreenButton.title = 'Tho√°t to√†n m√†n h√¨nh';
                        
                        // Reset animation khi v√†o fullscreen ƒë·ªÉ tr√°nh b·ªã lo·∫°n
                        if (window.audioUnlocked && typeof stopAllAnimations === 'function') {
                            stopAllAnimations();
                            // Delay m·ªôt ch√∫t ƒë·ªÉ ƒë·∫£m b·∫£o animation ƒë√£ d·ª´ng ho√†n to√†n
                            setTimeout(function() {
                                if (typeof startAnimation === 'function') {
                                    startAnimation();
                                }
                            }, 300);
                        }
                    } else {
                        if (fullscreenIcon) fullscreenIcon.style.display = 'block';
                        if (fullscreenExitIcon) fullscreenExitIcon.style.display = 'none';
                        fullscreenButton.title = 'M·ªü to√†n m√†n h√¨nh';
                    }
                }
                
                function toggleFullscreen() {
                    if (!document.fullscreenElement && !document.webkitFullscreenElement && !document.mozFullScreenElement && !document.msFullscreenElement) {
                        // V√†o fullscreen
                        const element = document.documentElement;
                        if (element.requestFullscreen) {
                            element.requestFullscreen();
                        } else if (element.webkitRequestFullscreen) {
                            element.webkitRequestFullscreen();
                        } else if (element.mozRequestFullScreen) {
                            element.mozRequestFullScreen();
                        } else if (element.msRequestFullscreen) {
                            element.msRequestFullscreen();
                        }
                    } else {
                        // Tho√°t fullscreen
                        if (document.exitFullscreen) {
                            document.exitFullscreen();
                        } else if (document.webkitExitFullscreen) {
                            document.webkitExitFullscreen();
                        } else if (document.mozCancelFullScreen) {
                            document.mozCancelFullScreen();
                        } else if (document.msExitFullscreen) {
                            document.msExitFullscreen();
                        }
                    }
                }
                
                fullscreenButton.addEventListener('click', toggleFullscreen);
                
                // L·∫Øng nghe s·ª± ki·ªán fullscreen change
                document.addEventListener('fullscreenchange', updateFullscreenButton);
                document.addEventListener('webkitfullscreenchange', updateFullscreenButton);
                document.addEventListener('mozfullscreenchange', updateFullscreenButton);
                document.addEventListener('MSFullscreenChange', updateFullscreenButton);
            }
            
            const unlockButton = document.getElementById('audioUnlockButton');
            if (unlockButton) {
                unlockButton.addEventListener('click', function() {
                    window.audioUnlocked = true;
                    const overlay = document.getElementById('audioUnlockOverlay');
                    
                    // D·ª´ng t·∫•t c·∫£ animation ngay l·∫≠p t·ª©c tr∆∞·ªõc khi t·∫Øt overlay
                    if (typeof stopAllAnimations === 'function') {
                        stopAllAnimations();
                    }
                    
                    // T·∫Øt overlay
                    overlay.classList.add('hidden');
                    
                    // N·∫øu c√≥ audio ƒëang ch·ªù, ph√°t ngay
                    if (window.pendingAudio) {
                        window.pendingAudio.play().then(function() {
                            // C·∫≠p nh·∫≠t icon button
                            const musicPlayButton = document.getElementById('musicPlayButton');
                            if (musicPlayButton) {
                                const playIcon = musicPlayButton.querySelector('.play-icon');
                                const pauseIcon = musicPlayButton.querySelector('.pause-icon');
                                if (playIcon) playIcon.style.display = 'none';
                                if (pauseIcon) pauseIcon.style.display = 'flex';
                            }
                        }).catch(function(error) {
                            console.error('‚ùå Kh√¥ng th·ªÉ ph√°t nh·∫°c sau khi unlock:', error);
                        });
                        window.pendingAudio = null;
                    }
                    
                    // ƒê·ª£i overlay transition ho√†n th√†nh (300ms) + th√™m delay ƒë·ªÉ ƒë·∫£m b·∫£o m∆∞·ª£t (400ms)
                    setTimeout(function() {
                        // Start text animation - reset v√† b·∫Øt ƒë·∫ßu l·∫°i t·ª´ ƒë·∫ßu
                        if (typeof startAnimation === 'function') {
                            // ƒê·∫£m b·∫£o reset ho√†n to√†n tr∆∞·ªõc
                            if (typeof stopAllAnimations === 'function') {
                                stopAllAnimations();
                            }
                            // Delay th√™m m·ªôt ch√∫t ƒë·ªÉ ƒë·∫£m b·∫£o DOM ƒë√£ s·∫µn s√†ng
                            setTimeout(function() {
                                startAnimation();
                            }, 200);
                        }
                        // Start decorative effects
                        if (typeof startDecorativeEffects === 'function') {
                            setTimeout(function() {
                                startDecorativeEffects();
                            }, 300);
                        }
                        // Start particle effects
                        if (typeof startParticleEffects === 'function') {
                            setTimeout(function() {
                                startParticleEffects();
                            }, 400);
                        }
                        // Start floating decorations
                        if (typeof startFloatingDecorations === 'function') {
                            setTimeout(function() {
                                startFloatingDecorations();
                            }, 500);
                        }
                    }, 700); // TƒÉng delay t·ª´ 300ms l√™n 700ms
                });
            }
        });
    </script>

    <!-- Removed all animation elements to prevent conflicts with Tulipanes -->

    <!-- Main Content -->
    <div class="container">
        <!-- Cute Pink Board -->
        <div class="cute-board">
            <!-- Vi·ªÅn khung ngo√†i c√πng -->
            <div class="outer-frame"></div>
            <!-- Vi·ªÅn khung gi·ªØa -->
            <div class="middle-frame"></div>
            <!-- Vi·ªÅn khung trong -->
            <div class="inner-frame"></div>
            <!-- B·ªÅ m·∫∑t b·∫£ng -->
            <div class="board-surface">
                <div class="board-texture"></div>
                <div class="board-decoration">
                <!-- Corner decorations -->
                <div class="board-corner top-left-corner">
                    <img src="assets/images/love.gif" alt="Love" class="love-icon">
                </div>
                <div class="board-corner top-right-corner">
                    <img src="assets/images/love.gif" alt="Love" class="love-icon">
                </div>
                <div class="board-corner bottom-left-corner">
                    <img src="assets/images/mewmew.gif" alt="Mewmew" class="love-icon">
                </div>
                <div class="board-corner bottom-right-corner">
                    <img src="assets/images/mewmew.gif" alt="Mewmew" class="love-icon">
                </div>
                
                <!-- Side decorations -->
                <div class="side-decoration left-side">
                    <div class="deco-item">üíñ</div>
                    <div class="deco-item">‚ú®</div>
                    <div class="deco-item">üíï</div>
                </div>
                <div class="side-decoration right-side">
                    <div class="deco-item">‚≠ê</div>
                    <div class="deco-item">üíó</div>
                    <div class="deco-item">‚ú®</div>
                </div>
            </div>
            
                <div class="text-container">
                    <div class="handwriting-text">
                        <div class="text-line" data-text="Ch√∫c m·ª´ng ng√†y"></div>
                        <div class="text-line" data-text="Nh√† Gi√°o Vi·ªát Nam"></div>
                        <div class="text-line" data-text="20/11"></div>
                    </div>
                    
                    <!-- Button ƒê√≥n nh·∫≠n y√™u th∆∞∆°ng -->
                    <div class="love-button-container" id="loveButtonContainer" style="display: none;">
                        <button class="love-button" onclick="loadTulipanesContent()">
                            <span class="button-text">ƒê√≥n nh·∫≠n y√™u th∆∞∆°ng</span>
                            <span class="button-heart">üíñ</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        
        // L·∫•y ID t·ª´ hash URL (#id=xxx)
        function getGiftIdFromHash() {
            const hash = window.location.hash;
            
            if (hash && hash.startsWith('#id=')) {
                const giftId = hash.substring(4); // B·ªè qua '#id='
                return giftId;
            }
            
            return null;
        }
        
        // Setup button ph√°t nh·∫°c
        // Expose function globally ƒë·ªÉ c√≥ th·ªÉ g·ªçi l·∫°i sau khi load Tulipanes
        window.setupMusicButton = function(audio) {
            const musicPlayButton = document.getElementById('musicPlayButton');
            if (!musicPlayButton) {
                return;
            }
            
            // X√≥a c√°c event listeners c≈© n·∫øu c√≥ (b·∫±ng c√°ch clone v√† replace)
            const newButton = musicPlayButton.cloneNode(true);
            musicPlayButton.parentNode.replaceChild(newButton, musicPlayButton);
            const freshButton = document.getElementById('musicPlayButton');
            
            let isMusicPlaying = false;
            freshButton.style.display = 'flex';
            
            // X·ª≠ l√Ω click button
            freshButton.addEventListener('click', function() {
                if (!audio || !audio.src) {
                    return;
                }
                
                if (isMusicPlaying) {
                    // ƒêang ph√°t, d·ª´ng l·∫°i
                    audio.pause();
                    isMusicPlaying = false;
                    // Hi·ªÉn th·ªã icon play, ·∫©n icon pause
                    const playIcon = freshButton.querySelector('.play-icon');
                    const pauseIcon = freshButton.querySelector('.pause-icon');
                    if (playIcon) playIcon.style.display = 'flex';
                    if (pauseIcon) pauseIcon.style.display = 'none';
                } else {
                    // Ch∆∞a ph√°t, ph√°t nh·∫°c
                    audio.currentTime = 0;
                    audio.play().then(function() {
                        isMusicPlaying = true;
                        // Hi·ªÉn th·ªã icon pause, ·∫©n icon play
                        const playIcon = freshButton.querySelector('.play-icon');
                        const pauseIcon = freshButton.querySelector('.pause-icon');
                        if (playIcon) playIcon.style.display = 'none';
                        if (pauseIcon) pauseIcon.style.display = 'flex';
                    }).catch(function(error) {
                        console.error('‚ùå [Index] Kh√¥ng th·ªÉ ph√°t nh·∫°c:', error);
                        alert('Kh√¥ng th·ªÉ ph√°t nh·∫°c. Vui l√≤ng th·ª≠ l·∫°i.');
                    });
                }
            });
            
            // Kh√¥ng c·∫ßn x·ª≠ l√Ω 'ended' event n·ªØa v√¨ ƒë√£ set loop = true
            // Audio s·∫Ω t·ª± ƒë·ªông l·∫∑p l·∫°i khi ph√°t h·∫øt, kh√¥ng c·∫ßn reset icon
            
            audio.addEventListener('pause', function() {
                isMusicPlaying = false;
                // Hi·ªÉn th·ªã icon play, ·∫©n icon pause
                const playIcon = freshButton.querySelector('.play-icon');
                const pauseIcon = freshButton.querySelector('.pause-icon');
                if (playIcon) playIcon.style.display = 'flex';
                if (pauseIcon) pauseIcon.style.display = 'none';
            });
            
            audio.addEventListener('play', function() {
                isMusicPlaying = true;
                // Hi·ªÉn th·ªã icon pause, ·∫©n icon play
                const playIcon = freshButton.querySelector('.play-icon');
                const pauseIcon = freshButton.querySelector('.pause-icon');
                if (playIcon) playIcon.style.display = 'none';
                if (pauseIcon) pauseIcon.style.display = 'flex';
            });
        };
        
        // Alias function ƒë·ªÉ code c≈© v·∫´n work
        const setupMusicButton = window.setupMusicButton;
        
        // Fetch Gift2011 data t·ª´ API
        let gift2011Data = null;
        async function fetchGift2011Data(giftId) {
            if (!giftId) {
                return null;
            }
            
            try {
                const SERVER_URL = 'https://my-server-nom6.onrender.com';
                const apiUrl = `${SERVER_URL}/api/gift2011s/${giftId}`;
                
                const response = await fetch(apiUrl);
                
                if (!response.ok) {
                    const errorText = await response.text();
                    console.error('‚ùå [fetchGift2011Data] Failed to fetch Gift2011:', {
                        status: response.status,
                        statusText: response.statusText,
                        error: errorText
                    });
                    return null;
                }
                
                const result = await response.json();
                
                if (result.success && result.data) {
                    return result.data;
                } else {
                    console.error('‚ùå [fetchGift2011Data] Invalid response format:', result);
                    return null;
                }
            } catch (error) {
                console.error('‚ùå [fetchGift2011Data] Error fetching Gift2011:', error);
                console.error('‚ùå [fetchGift2011Data] Error details:', {
                    name: error.name,
                    message: error.message,
                    stack: error.stack
                });
                return null;
            }
        }
        
        // Load Gift2011 data ngay khi DOM ready (s·ªõm h∆°n window.load)
        document.addEventListener('DOMContentLoaded', async function() {
            const giftId = getGiftIdFromHash();
            
            // N·∫øu kh√¥ng c√≥ id, redirect ƒë·∫øn admin.html
            if (!giftId) {
                window.location.href = 'admin.html';
                return;
            }
            
            if (giftId) {
                gift2011Data = await fetchGift2011Data(giftId);
                
                    if (gift2011Data) {
                    window.gift2011Data = gift2011Data; // L∆∞u v√†o window ƒë·ªÉ c√≥ th·ªÉ truy c·∫≠p sau
                    
                    // Preload nh·∫°c n·∫øu c√≥ v√† setup button ph√°t nh·∫°c, sau ƒë√≥ t·ª± ƒë·ªông ph√°t
                    if (gift2011Data.musicType === 'Sample' && gift2011Data.musicPath) {
                        const audio = new Audio(gift2011Data.musicPath);
                        audio.preload = 'auto';
                        audio.loop = true; // T·ª± ƒë·ªông l·∫∑p l·∫°i khi ph√°t h·∫øt
                        window.preloadAudio = audio; // L∆∞u ƒë·ªÉ c√≥ th·ªÉ d√πng sau
                        setupMusicButton(audio);
                        
                        // T·ª± ƒë·ªông ph√°t nh·∫°c sau khi load xong
                        audio.addEventListener('canplaythrough', function() {
                            if (window.audioUnlocked) {
                                // N·∫øu ƒë√£ unlock, ph√°t ngay
                                audio.play().then(function() {
                                    // C·∫≠p nh·∫≠t icon button
                                    const musicPlayButton = document.getElementById('musicPlayButton');
                                    if (musicPlayButton) {
                                        const playIcon = musicPlayButton.querySelector('.play-icon');
                                        const pauseIcon = musicPlayButton.querySelector('.pause-icon');
                                        if (playIcon) playIcon.style.display = 'none';
                                        if (pauseIcon) pauseIcon.style.display = 'flex';
                                    }
                                }).catch(function(error) {
                                    console.error('‚ùå [DOMContentLoaded] Kh√¥ng th·ªÉ t·ª± ƒë·ªông ph√°t nh·∫°c:', error);
                                });
                            } else {
                                // N·∫øu ch∆∞a unlock, l∆∞u l·∫°i ƒë·ªÉ ph√°t sau
                                window.pendingAudio = audio;
                            }
                        }, { once: true });
                    } else if (gift2011Data.musicType === 'Custom' && gift2011Data.customMusic) {
                        const audio = new Audio(gift2011Data.customMusic);
                        audio.preload = 'auto';
                        audio.loop = true; // T·ª± ƒë·ªông l·∫∑p l·∫°i khi ph√°t h·∫øt
                        window.preloadAudio = audio; // L∆∞u ƒë·ªÉ c√≥ th·ªÉ d√πng sau
                        setupMusicButton(audio);
                        
                        // T·ª± ƒë·ªông ph√°t nh·∫°c sau khi load xong
                        audio.addEventListener('canplaythrough', function() {
                            if (window.audioUnlocked) {
                                // N·∫øu ƒë√£ unlock, ph√°t ngay
                                audio.play().then(function() {
                                    // C·∫≠p nh·∫≠t icon button
                                    const musicPlayButton = document.getElementById('musicPlayButton');
                                    if (musicPlayButton) {
                                        const playIcon = musicPlayButton.querySelector('.play-icon');
                                        const pauseIcon = musicPlayButton.querySelector('.pause-icon');
                                        if (playIcon) playIcon.style.display = 'none';
                                        if (pauseIcon) pauseIcon.style.display = 'flex';
                                    }
                                }).catch(function(error) {
                                    console.error('‚ùå [DOMContentLoaded] Kh√¥ng th·ªÉ t·ª± ƒë·ªông ph√°t nh·∫°c:', error);
                                });
                            } else {
                                // N·∫øu ch∆∞a unlock, l∆∞u l·∫°i ƒë·ªÉ ph√°t sau
                                window.pendingAudio = audio;
                            }
                        }, { once: true });
                    }
                }
            }
        });
        
        // Backup: Load khi window.load (fallback)
        window.addEventListener('load', async function() {
            const giftId = getGiftIdFromHash();
            
            // N·∫øu kh√¥ng c√≥ id, redirect ƒë·∫øn admin.html
            if (!giftId) {
                window.location.href = 'admin.html';
                return;
            }
            
            // N·∫øu ch∆∞a c√≥ data, th·ª≠ fetch l·∫°i
            if (!gift2011Data) {
                if (giftId) {
                    gift2011Data = await fetchGift2011Data(giftId);
                    if (gift2011Data) {
                        window.gift2011Data = gift2011Data;
                    }
                }
            }
        });
        
        // Prevent scroll ho√†n to√†n
        var preventWheel = function(e) {
          e.preventDefault();
        };
        var preventTouchMove = function(e) {
          e.preventDefault();
        };
        var preventScroll = function(e) {
          e.preventDefault();
          window.scrollTo(0, 0);
        };
        
        document.addEventListener('wheel', preventWheel, { passive: false });
        document.addEventListener('touchmove', preventTouchMove, { passive: false });
        document.addEventListener('scroll', preventScroll, { passive: false });
        
        // L∆∞u c√°c handlers ƒë·ªÉ c√≥ th·ªÉ x√≥a sau
        window.indexScrollHandlers = {
          wheel: preventWheel,
          touchmove: preventTouchMove,
          scroll: preventScroll
        };
        
        // ƒê·∫£m b·∫£o kh√¥ng scroll khi load
        window.addEventListener('load', function() {
          document.documentElement.scrollTop = 0;
          document.body.scrollTop = 0;
          window.scrollTo(0, 0);
        });
        
        const lines = document.querySelectorAll('.text-line');
        const penCursor = document.getElementById('penCursor');
        let inkTrailInterval;
        let animationTimeout;
        let currentLineIndex = 0;
        let isAnimating = false;

        function createInkTrail(x, y) {
            const trail = document.createElement('div');
            trail.className = 'ink-trail';
            trail.style.left = (x + 3) + 'px';  // GI·∫¢M T·ª™ +8 ‚Üí +3
            trail.style.top = (y + 5) + 'px';  // S·ª¨A: T·ª™ +28 ‚Üí +5 ƒê·ªÇ M·ª∞C S√ÅT ƒê·∫¶U B√öT
            document.body.appendChild(trail);
            setTimeout(() => trail.remove(), 800);
        }

        function animateLine(lineIndex) {
            currentLineIndex = lineIndex;
            isAnimating = true;
            
            if (lineIndex >= lines.length) {
                penCursor.classList.remove('active');
                clearInterval(inkTrailInterval);
                isAnimating = false;
                return;
            }

            const line = lines[lineIndex];
            const text = line.getAttribute('data-text');
            line.innerHTML = '';

            text.split('').forEach((char, i) => {
                const span = document.createElement('span');
                span.className = 'letter';
                span.textContent = char === ' ' ? '\u00A0' : char;
                line.appendChild(span);

                setTimeout(() => animateLetter(span, () => {
                    if (i === text.length - 1) {
                        // Th√™m hi·ªáu ·ª©ng wave khi ho√†n th√†nh d√≤ng
                        line.classList.add('completed');
                        setTimeout(() => animateLine(lineIndex + 1), 200);
                    }
                }), i * 120);
            });

            if (lineIndex === 0) {
                setTimeout(() => animateLetter(line.children[0]), 800);
            }
        }

        function animateLetter(letter, callback) {
            const rect = letter.getBoundingClientRect();

            // B√∫t di chuy·ªÉn ƒë·∫øn v·ªã tr√≠ CH√çNH X√ÅC
            penCursor.classList.add('active');
            movePenTo(rect.left - 8, rect.top + rect.height * 0.75); // ƒê·∫®Y B√öT XU·ªêNG G·∫¶N CH√ÇN CH·ªÆ

            setTimeout(() => {
                letter.classList.add('writing');
                startInkTrail();

                setTimeout(() => {
                    clearInterval(inkTrailInterval);
                    if (callback) callback();
                }, 100);
            }, 100);
        }

        function movePenTo(x, y) {
            const startX = penCursor.offsetLeft || 0;
            const startY = penCursor.offsetTop || 0;
            const moveTime = 150;
            const startTime = Date.now();

            function move() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / moveTime, 1);
                const currentX = startX + (x - startX) * progress;
                const currentY = startY + (y - startY) * progress;
                const angle = Math.atan2(y - startY, x - startX) * 180 / Math.PI;

                penCursor.style.left = currentX + 'px';
                penCursor.style.top = currentY + 'px';
                penCursor.style.transform = `rotate(${angle + 0}deg)`; // B√öT H∆Ø·ªöNG T·ª™ PH·∫¢I QUA TR√ÅI, ƒê·∫¶U B·∫§M ·ªû TR√äN

                if (progress < 1) {
                    requestAnimationFrame(move);
                }
            }
            move();
        }

        function startInkTrail() {
            inkTrailInterval = setInterval(() => {
                const penRect = penCursor.getBoundingClientRect();
                // M·ª∞C S√ÅT ƒê·∫¶U B√öT - ƒê√É S·ª¨A T·ª™ +28 ‚Üí +5
                createInkTrail(penRect.left + 3, penRect.top + 20);
            }, 50); // TƒÉng t·∫ßn su·∫•t m·ª±c nh·∫π cho m∆∞·ª£t
        }

        // B·∫Øt ƒë·∫ßu - CH·ªà CH·∫†Y KHI XOAY NGANG
        let animationStarted = false;
        
        function startAnimation() {
            // CH·ªà ch·∫°y animation khi ƒë√£ unlock audio (t·ª©c l√† overlay "B·∫Øt ƒë·∫ßu" ƒë√£ t·∫Øt)
            // Tr√™n mobile/tablet, ph·∫£i ƒë·ª£i user click "B·∫Øt ƒë·∫ßu" tr∆∞·ªõc
            if (window.innerWidth <= 1024 && !window.audioUnlocked) {
                return; // Kh√¥ng ch·∫°y animation n·∫øu ch∆∞a unlock tr√™n mobile/tablet
            }
            
            // D·ª´ng t·∫•t c·∫£ animation hi·ªán t·∫°i tr∆∞·ªõc
            stopAllAnimations();
            
            // Reset animation tr∆∞·ªõc
            resetAnimation();
            
            // Ki·ªÉm tra xem container c√≥ b·ªã ·∫©n kh√¥ng (do CSS portrait)
            const container = document.querySelector('.container');
            const isContainerHidden = container && window.getComputedStyle(container).display === 'none';
            // Logic:
            // Desktop (>1024px): Lu√¥n ch·∫°y
            // Tablet v√† Mobile (<=1024px): Ch·ªâ ch·∫°y khi landscape V√Ä container kh√¥ng b·ªã ·∫©n V√Ä ƒë√£ unlock
            if (window.innerWidth > 1024 || 
                (window.innerWidth <= 1024 && window.innerHeight < window.innerWidth && !isContainerHidden && window.audioUnlocked)) {
                
                // Reset animationStarted ƒë·ªÉ lu√¥n kh·ªüi t·∫°o l·∫°i hi·ªáu ·ª©ng
                animationStarted = false;
                animationStarted = true;
                
                // Clear timeout c≈© n·∫øu c√≥
                if (animationTimeout) {
                    clearTimeout(animationTimeout);
                }
                
                // Delay ƒë·ªÉ tr√°nh animation b·ªã lo·∫°n
                animationTimeout = setTimeout(() => {
                    animateLine(0);
                }, 500);
            } else {
                animationStarted = false;
            }
        }

        // D·ª´ng t·∫•t c·∫£ animation
        function stopAllAnimations() {
            clearInterval(inkTrailInterval);
            clearTimeout(animationTimeout);
            penCursor.classList.remove('active');
            animationStarted = false;
            isAnimating = false;
            currentLineIndex = 0;
            
            // Clear t·∫•t c·∫£ text ƒëang ch·∫°y
            lines.forEach(line => {
                line.innerHTML = '';
                line.classList.remove('completed'); // Clear hi·ªáu ·ª©ng wave
                const text = line.getAttribute('data-text');
                text.split('').forEach(char => {
                    const span = document.createElement('span');
                    span.className = 'letter';
                    span.textContent = char === ' ' ? '\u00A0' : char;
                    line.appendChild(span);
                });
            });
        }

        // Reset animation v·ªÅ tr·∫°ng th√°i ban ƒë·∫ßu
        function resetAnimation() {
            // D·ª´ng animation hi·ªán t·∫°i (ƒë√£ bao g·ªìm reset text)
            stopAllAnimations();
        }

        // Debounce function ƒë·ªÉ tr√°nh g·ªçi qu√° nhi·ªÅu l·∫ßn
        let debounceTimer;
        function debounceStartAnimation() {
            // CH·ªà ch·∫°y animation khi ƒë√£ unlock audio (t·ª©c l√† overlay "B·∫Øt ƒë·∫ßu" ƒë√£ t·∫Øt)
            // Tr√™n mobile/tablet, ph·∫£i ƒë·ª£i user click "B·∫Øt ƒë·∫ßu" tr∆∞·ªõc
            if (window.innerWidth <= 1024 && !window.audioUnlocked) {
                return; // Kh√¥ng ch·∫°y animation n·∫øu ch∆∞a unlock tr√™n mobile/tablet
            }
            
            // D·ª´ng t·∫•t c·∫£ animation ngay l·∫≠p t·ª©c
            stopAllAnimations();
            
            clearTimeout(debounceTimer);
            debounceTimer = setTimeout(() => {
                startAnimation();
            }, 400); // TƒÉng delay ƒë·ªÉ tr√°nh animation b·ªã lo·∫°n
        }

        // KH√îNG ch·∫°y animation khi load trang - ch·ªâ ch·∫°y sau khi unlock audio
        // window.addEventListener('load', startAnimation); // ƒê√£ t·∫Øt ƒë·ªÉ ch·ªù unlock
        
        // Ch·∫°y khi xoay m√†n h√¨nh
        window.addEventListener('orientationchange', debounceStartAnimation);
        
        // Ch·∫°y khi resize m√†n h√¨nh
        window.addEventListener('resize', debounceStartAnimation);

        // Floating decorations - ch·ªâ ch·∫°y sau khi unlock
        function startFloatingDecorations() {
            document.querySelectorAll('.corner-decor circle').forEach((circle, i) => {
                circle.style.animation = `float ${3 + (i % 3)}s ease-in-out infinite`;
                circle.style.animationDelay = `${i * 0.2}s`;
            });
        }

        // Enhanced decorative effects
        function createRandomHeart() {
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.innerHTML = ['üíñ', 'üíï', 'üíó', 'üíù'][Math.floor(Math.random() * 4)];
            heart.style.position = 'fixed';
            heart.style.left = Math.random() * 100 + '%';
            heart.style.top = Math.random() * 100 + '%';
            heart.style.fontSize = '20px';
            heart.style.pointerEvents = 'none';
            heart.style.zIndex = '1000';
            heart.style.animationDuration = (6 + Math.random() * 4) + 's';
            heart.style.animationDelay = Math.random() * 2 + 's';
            heart.style.opacity = '0.8';
            heart.style.animation = 'heartFloat 6s ease-in-out infinite';
            document.body.appendChild(heart);
            
            setTimeout(() => heart.remove(), 10000);
        }

        function createRandomFlower() {
            const flower = document.createElement('div');
            flower.className = 'flower';
            flower.innerHTML = ['üå∏', 'üå∫', 'üåª', 'üå∑', 'üåπ', 'üåº'][Math.floor(Math.random() * 6)];
            flower.style.position = 'fixed';
            flower.style.left = Math.random() * 100 + '%';
            flower.style.top = Math.random() * 100 + '%';
            flower.style.fontSize = '18px';
            flower.style.pointerEvents = 'none';
            flower.style.zIndex = '1000';
            flower.style.animationDuration = (8 + Math.random() * 4) + 's';
            flower.style.animationDelay = Math.random() * 2 + 's';
            flower.style.opacity = '0.7';
            flower.style.animation = 'flowerFloat 8s ease-in-out infinite';
            document.body.appendChild(flower);
            
            setTimeout(() => flower.remove(), 12000);
        }

        function createRandomConfetti() {
            const confetti = document.createElement('div');
            confetti.className = 'confetti';
            confetti.style.position = 'fixed';
            confetti.style.left = Math.random() * 100 + '%';
            confetti.style.top = '-20px';
            confetti.style.width = '6px';
            confetti.style.height = '6px';
            confetti.style.backgroundColor = ['#ff6b9d', '#ff8fab', '#ffb3d6', '#ffc4d6'][Math.floor(Math.random() * 4)];
            confetti.style.pointerEvents = 'none';
            confetti.style.zIndex = '1000';
            confetti.style.animationDuration = (4 + Math.random() * 2) + 's';
            confetti.style.animationDelay = Math.random() * 1 + 's';
            confetti.style.animation = 'confettiFall 4s linear forwards';
            document.body.appendChild(confetti);
            
            setTimeout(() => confetti.remove(), 6000);
        }

        function createRandomSparkle() {
            const sparkle = document.createElement('div');
            sparkle.className = 'sparkle';
            sparkle.innerHTML = ['‚ú®', '‚≠ê'][Math.floor(Math.random() * 2)];
            sparkle.style.position = 'fixed';
            sparkle.style.left = Math.random() * 100 + '%';
            sparkle.style.top = Math.random() * 100 + '%';
            sparkle.style.fontSize = '16px';
            sparkle.style.pointerEvents = 'none';
            sparkle.style.zIndex = '1000';
            sparkle.style.animationDuration = (3 + Math.random() * 2) + 's';
            sparkle.style.animationDelay = Math.random() * 1 + 's';
            sparkle.style.opacity = '0.9';
            sparkle.style.animation = 'sparkleTwinkle 3s ease-in-out infinite';
            document.body.appendChild(sparkle);
            
            setTimeout(() => sparkle.remove(), 5000);
        }

        // Start decorative animations
        function startDecorativeEffects() {
            // Create random hearts every 6-8 seconds (gi·∫£m t·∫ßn su·∫•t)
            setInterval(createRandomHeart, 6000 + Math.random() * 2000);
            
            // Create random flowers every 8-10 seconds (gi·∫£m t·∫ßn su·∫•t)
            setInterval(createRandomFlower, 8000 + Math.random() * 2000);
            
            // Create random confetti every 4-6 seconds (gi·∫£m t·∫ßn su·∫•t)
            setInterval(createRandomConfetti, 4000 + Math.random() * 2000);
            
            // Create random sparkles every 5-7 seconds (gi·∫£m t·∫ßn su·∫•t)
            setInterval(createRandomSparkle, 5000 + Math.random() * 2000);
        }

        // KH√îNG start decorative effects khi load trang - ch·ªâ ch·∫°y sau khi unlock
        // window.addEventListener('load', () => {
        //     setTimeout(startDecorativeEffects, 1000);
        // });

        // Add special effect when text animation completes
        function triggerCelebration() {
            // T·∫°o hi·ªáu ·ª©ng nh·∫π nh√†ng
            for (let i = 0; i < 8; i++) {
                setTimeout(() => createRandomHeart(), i * 200);
            }
            
            for (let i = 0; i < 10; i++) {
                setTimeout(() => createRandomConfetti(), i * 150);
            }
        }

        // Trigger celebration when all text is written
        let originalAnimateLine = animateLine;
        animateLine = function(lineIndex) {
            originalAnimateLine(lineIndex);
            
            if (lineIndex >= lines.length) {
                setTimeout(triggerCelebration, 1000);
                // Hi·ªÉn th·ªã button sau khi text ho√†n th√†nh
                setTimeout(() => {
                    document.getElementById('loveButtonContainer').style.display = 'block';
                }, 2000);
            }
        };

        // Create floating particles
        function createParticle() {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.position = 'fixed';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.top = Math.random() * 100 + '%';
            particle.style.width = '4px';
            particle.style.height = '4px';
            particle.style.backgroundColor = '#ffb3d6';
            particle.style.borderRadius = '50%';
            particle.style.pointerEvents = 'none';
            particle.style.zIndex = '1000';
            particle.style.opacity = '0.6';
            particle.style.animationDuration = (10 + Math.random() * 10) + 's';
            particle.style.animationDelay = Math.random() * 2 + 's';
            particle.style.animation = 'particleFloat 10s ease-in-out infinite';
            document.body.appendChild(particle);
            
            setTimeout(() => particle.remove(), 20000);
        }

        // Create celebration burst effect
        function createCelebrationBurst() {
            const burst = document.createElement('div');
            burst.className = 'celebration-burst';
            document.body.appendChild(burst);
            
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'burst-particle';
                const angle = (i / 20) * 360;
                const distance = 100 + Math.random() * 100;
                const dx = Math.cos(angle * Math.PI / 180) * distance;
                const dy = Math.sin(angle * Math.PI / 180) * distance;
                
                particle.style.setProperty('--dx', dx + 'px');
                particle.style.setProperty('--dy', dy + 'px');
                particle.style.animationDelay = Math.random() * 0.5 + 's';
                
                burst.appendChild(particle);
            }
            
            setTimeout(() => burst.remove(), 2000);
        }



        // Start particle effects
        function startParticleEffects() {
            setInterval(createParticle, 8000 + Math.random() * 4000); // Gi·∫£m t·∫ßn su·∫•t particles
        }


        // KH√îNG start effects khi load trang - ch·ªâ ch·∫°y sau khi unlock
        // window.addEventListener('load', () => {
        //     setTimeout(() => {
        //         startDecorativeEffects();
        //         startParticleEffects();
        //     }, 1000);
        // });

        // Function ƒë·ªÉ load v√† thay th·∫ø n·ªôi dung v·ªõi Tulipanes (copy t·ª´ demo)
        function loadTulipanesContent() {
                   // D·ª´ng t·∫•t c·∫£ animation c≈© tr∆∞·ªõc khi load trang m·ªõi
                   function stopAllCurrentAnimations() {
                       // D·ª´ng t·∫•t c·∫£ interval v√† timeout
                       for (let i = 1; i < 10000; i++) {
                           clearInterval(i);
                           clearTimeout(i);
                       }
                       
                       // D·ª´ng animation frame
                       if (window.cancelAnimationFrame) {
                           for (let i = 1; i < 10000; i++) {
                               window.cancelAnimationFrame(i);
                           }
                       }
                       
                       // Reset c√°c bi·∫øn global c√≥ th·ªÉ
                       if (window.animationStarted !== undefined) {
                           window.animationStarted = false;
                       }
                       if (window.isAnimating !== undefined) {
                           window.isAnimating = false;
                       }
                   }
            
            stopAllCurrentAnimations();
            
            // X√ìA C√ÅC EVENT LISTENERS CH·∫∂N SCROLL C·ª¶A INDEX.HTML
            if (window.indexScrollHandlers) {
                document.removeEventListener('wheel', window.indexScrollHandlers.wheel);
                document.removeEventListener('touchmove', window.indexScrollHandlers.touchmove);
                document.removeEventListener('scroll', window.indexScrollHandlers.scroll);
            }
            
            // ƒê·ª£i m·ªôt ch√∫t ƒë·ªÉ ƒë·∫£m b·∫£o animation ƒë√£ d·ª´ng ho√†n to√†n
            setTimeout(() => {
                fetch('Tulipanes Rosados.html')
                .then(response => response.text())
                .then(html => {
                    // Parse HTML ƒë·ªÉ l·∫•y ph·∫ßn head v√† body content
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    
                    // X√≥a h·∫øt CSS c≈© ƒë·ªÉ tr√°nh conflict
                    document.querySelectorAll('style').forEach(style => {
                        if (!style.hasAttribute('data-source')) {
                            style.remove();
                        }
                    });
                    
                    // Th√™m CSS c·ªßa Tulipanes v√†o head
                    const tulipanesStyles = doc.querySelectorAll('style');
                    tulipanesStyles.forEach((style, index) => {
                        style.setAttribute('data-source', 'tulipanes');
                        document.head.appendChild(style);
                    });
                    
                    // QUAN TR·ªåNG: Truy·ªÅn gift2011Data v√†o window TR∆Ø·ªöC KHI thay th·∫ø body
                    // ƒë·ªÉ ƒë·∫£m b·∫£o data c√≥ s·∫µn khi script Tulipanes ch·∫°y
                    if (gift2011Data) {
                        window.gift2011Data = gift2011Data;
                    } else {
                        // ƒê·∫£m b·∫£o window.gift2011Data = null ƒë·ªÉ Tulipanes bi·∫øt l√† kh√¥ng c√≥ data
                        window.gift2011Data = null;
                    }
                    
                    // Thay th·∫ø n·ªôi dung body m√† kh√¥ng ·∫£nh h∆∞·ªüng audio
                    // Button ph√°t nh·∫°c ch·ªâ hi·ªÉn th·ªã ·ªü index.html, kh√¥ng hi·ªÉn th·ªã ·ªü Tulipanes
                    const tulipanesBody = doc.body.innerHTML;
                    document.body.innerHTML = tulipanesBody;
                    
                    // Th·ª±c thi script c·ªßa Tulipanes n·∫øu c√≥
                    // ƒê·ª£i m·ªôt ch√∫t ƒë·ªÉ ƒë·∫£m b·∫£o DOM ƒë√£ s·∫µn s√†ng sau khi replace body
                    setTimeout(() => {
                        const tulipanesScripts = doc.querySelectorAll('script');
                        
                        tulipanesScripts.forEach((script, index) => {
                            if (script.textContent) {
                                try {
                                    // T·∫°o script element m·ªõi ƒë·ªÉ th·ª±c thi
                                    const newScript = document.createElement('script');
                                    newScript.textContent = script.textContent;
                                    
                                    // Th√™m error handler ƒë·ªÉ b·∫Øt l·ªói
                                    newScript.onerror = function(e) {
                                        console.error('‚ùå [loadTulipanesContent] Script', index + 1, 'b·ªã l·ªói khi load:', e);
                                    };
                                    
                                    document.body.appendChild(newScript);
                                } catch(e) {
                                    console.error('‚ùå [loadTulipanesContent] Could not execute script', index + 1, ':', e);
                                    console.error('‚ùå [loadTulipanesContent] Error stack:', e.stack);
                                }
                            }
                        });
                    }, 50);
                    
                    // C·∫≠p nh·∫≠t class body v√† title
                    document.body.className = 'not-loaded';
                    document.title = 'Ramo de Tulipanes Azules';
                    
                    // Force refresh CSS
                    document.body.style.display = 'none';
                    document.body.offsetHeight; // Trigger reflow
                    document.body.style.display = '';
                    
                    // D·ª´ng audio g·ªëc c·ªßa Tulipanes n·∫øu c√≥
                    setTimeout(function() {
                        const tulipanesAudio = document.getElementById('audio-para-ti');
                        if(tulipanesAudio) {
                            tulipanesAudio.pause();
                            tulipanesAudio.currentTime = 0;
                        }
                    }, 100);
                    
                    // Kh·ªüi ch·∫°y hi·ªáu ·ª©ng c·ªßa Tulipanes
                    setTimeout(function() {
                        document.body.classList.remove('not-loaded');
                        
                        // Hi·ªÉn th·ªã b√≥ hoa v√† con th·ªè
                        setTimeout(function() {
                            const ramo = document.querySelector('.ramo');
                            if(ramo) {
                                ramo.classList.add('ramo--visible');
                            }
                            
                            const rabbits = document.querySelectorAll('.rabbit');
                            rabbits.forEach(function(rabbit) {
                                rabbit.classList.add('rabbit--visible');
                            });
                        }, 2500);
                    }, 100);
                })
                .catch(error => {
                    console.error('Error loading Tulipanes content:', error);
                    alert('Kh√¥ng th·ªÉ t·∫£i n·ªôi dung b√≥ hoa tulip');
                });
            }, 200); // ƒê·ª£i 200ms ƒë·ªÉ animation d·ª´ng ho√†n to√†n
        }
    </script>
</body>
</html>